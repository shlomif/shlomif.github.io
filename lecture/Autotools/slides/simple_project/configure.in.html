<?xml version="1.0" encoding="utf-8"?><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-GB" lang="en-GB"><head><meta charset="utf-8"/><link rel="stylesheet" href="../style.css" type="text/css"/><link rel="prev" href="Makefile.am.html"/><link rel="next" href="../common_macros/"/><title>The configure.in file</title></head><body><main><header><h1>3.2. The configure.in file</h1></header><nav><table class="page-nav-bar top"><tr><td><a href="../" class="nav" accesskey="c">Contents</a></td><td><a href="./" class="nav" accesskey="u">Up</a></td><td><a href="Makefile.am.html" class="nav" accesskey="p">Prev</a></td><td><a href="../common_macros/" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="../">GNU Autoconf, Automake and Libtool</a> → <a href="./">A Simple Project</a> → <a href="configure.in.html">The configure.in file</a></div></nav><div class="code_block"><pre>
<span class="Comment">dnl Process this file with autoconf to produce a configure script.</span>

<span class="Comment">dnl AC_INIT is the first macro that should be called in an Autoconf</span>
<span class="Comment">dnl script. It should be called with one argument that exhibits one</span>
<span class="Comment">dnl of the source files</span>
<span class="Identifier">AC_INIT</span><span class="Special">(</span>rwlock.c<span class="Special">)</span>

<span class="Comment">dnl Initialize Automake</span>
<span class="Comment">dnl The first parameter is the project name</span>
<span class="Comment">dnl The second is the version</span>
<span class="Identifier">AM_INIT_AUTOMAKE</span><span class="Special">(</span>pthread_rwlock_fcfs<span class="Special">,</span> <span class="Constant">0.4</span>.<span class="Constant">0</span><span class="Special">)</span>

<span class="Comment">dnl Initialize libtool</span>
<span class="Identifier">AM_PROG_LIBTOOL</span>

<span class="Comment">dnl Checks for programs.</span>
<span class="Identifier">AC_PROG_CC</span>


<span class="Comment">dnl Checks for libraries.</span>
<span class="Identifier">AC_CHECK_LIB</span><span class="Special">(</span>pthread<span class="Special">,</span> pthread_create<span class="Special">)</span>

<span class="Comment">dnl Checks for header files.</span>
<span class="Identifier">AC_HEADER_STDC</span>
<span class="Identifier">AC_CHECK_HEADERS</span><span class="Special">(</span>sys/time.h unistd.h<span class="Special">)</span>

<span class="Comment">dnl Set the debug flag to no by default</span>
debug_rwlock<span class="Statement">=</span>no

<span class="Comment">dnl Set a command line option to set it otherwise</span>
<span class="Identifier">AC_ARG_ENABLE</span><span class="Special">(</span>debug-rwlock<span class="Special">,</span>
 <span class="Special">[</span>  --enable-debug-rwlock  Enable an RWLock that prints debug notices on the screen. This is a debugging feature which should not be usually enabled<span class="Special">],</span>
 <span class="Special">[</span> debug_rwlock<span class="Statement">=</span>yes
 <span class="Special">])</span>

<span class="Comment">dnl If debug_rwlock is set</span>
<span class="Statement">if</span> <span class="Statement">test</span> <span class="Constant">&quot;x$debug_rwlock&quot;</span> <span class="Statement">=</span> <span class="Constant">&quot;xyes&quot;</span> <span class="Special">;</span> <span class="Statement">then</span>
    <span class="Comment">dnl Define the macro PTHREAD_RWLOCK_FCFS_DEBUG</span>
    <span class="Identifier">AC_DEFINE</span><span class="Special">(</span><span class="Identifier">PTHREAD_RWLOCK_FCFS_DEBUG</span><span class="Special">)</span>
<span class="Statement">fi</span>

<span class="Comment">dnl Checks for typedefs, structures, and compiler characteristics.</span>
<span class="Identifier">AC_C_CONST</span>
<span class="Identifier">AC_HEADER_TIME</span>

<span class="Comment">dnl Checks for library functions.</span>
<span class="Identifier">AC_CHECK_FUNCS</span><span class="Special">(</span>gettimeofday<span class="Special">)</span>

<span class="Comment">dnl Output the files</span>
<span class="Identifier">AC_OUTPUT</span><span class="Special">([</span>Makefile man/Makefile<span class="Special">])</span>
</pre></div><hr/></main><nav><table class="page-nav-bar bottom"><tr><td><a href="../" class="nav">Contents</a></td><td><a href="./" class="nav">Up</a></td><td><a href="Makefile.am.html" class="nav">Prev</a></td><td><a href="../common_macros/" class="nav">Next</a></td></tr></table></nav><p>Written by <a href="http://www.shlomifish.org/">Shlomi Fish</a></p><footer></footer></body></html>