<?xml version="1.0" encoding="utf-8"?><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-GB" lang="en-GB"><head><meta charset="utf-8"/><link rel="stylesheet" href="style.css" type="text/css"/><title>GNU Autoconf, Automake and Libtool</title></head><body><section class="page"><header><h2 id="page--DIR">GNU Autoconf, Automake and Libtool</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--DIR" class="nav" accesskey="c">Contents</a></td><td><b>Up</b></td><td><b>Prev</b></td><td><a href="#page--intro--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--DIR">GNU Autoconf, Automake and Libtool</a></div></nav><ul class="contentsmain"><li><a href="#page--intro--PAGE" class="contents">1. Introduction</a></li><li><a href="#page--how_it_fits--PAGE" class="contents">2. How it all fits together</a></li><li><a href="#page--simple_project--DIR" class="contents">3. A Simple Project</a><ul class="contents"><li><a href="#page--simple_project--Makefile.am--PAGE" class="contents">3.1. The Makefile.am file</a></li><li><a href="#page--simple_project--configure.in--PAGE" class="contents">3.2. The configure.in file</a></li></ul></li><li><a href="#page--common_macros--DIR" class="contents">4. Commonly Used configure.in macros</a><ul class="contents"><li><a href="#page--common_macros--AC_DEFINE--PAGE" class="contents">4.1. AC_DEFINE</a></li><li><a href="#page--common_macros--AC_CHECK_LIB--PAGE" class="contents">4.2. AC_CHECK_LIB</a></li><li><a href="#page--common_macros--AC_ARG_ENABLE--PAGE" class="contents">4.3. AC_ARG_ENABLE</a></li><li><a href="#page--common_macros--AC_OUTPUT--PAGE" class="contents">4.4. AC_OUTPUT</a></li><li><a href="#page--common_macros--AC_CHECK_FUNCS--PAGE" class="contents">4.5. AC_CHECK_FUNCS</a></li><li><a href="#page--common_macros--AC_CHECK_HEADERS--PAGE" class="contents">4.6. AC_CHECK_HEADERS</a></li></ul></li><li><a href="#page--changequote--PAGE" class="contents">5. Using changequote</a></li><li><a href="#page--Makefile_am--DIR" class="contents">6. Format of the Makefile.am File</a><ul class="contents"><li><a href="#page--Makefile_am--super--PAGE" class="contents">6.1. Super Targets</a></li><li><a href="#page--Makefile_am--sources--PAGE" class="contents">6.2. Specifying the source files</a></li><li><a href="#page--Makefile_am--ldadd--PAGE" class="contents">6.3. Linking with internal libraries</a></li><li><a href="#page--Makefile_am--headers--PAGE" class="contents">6.4. Library Headers</a></li><li><a href="#page--Makefile_am--extra_dist--PAGE" class="contents">6.5. EXTRA_DIST</a></li><li><a href="#page--Makefile_am--plain--PAGE" class="contents">6.6. Plain Rules</a></li><li><a href="#page--Makefile_am--lt-version--PAGE" class="contents">6.7. Libtool Library Versioning</a></li></ul></li><li><a href="#page--acconfig.h--DIR" class="contents">7. Format of acconfig.h</a><ul class="contents"><li><a href="#page--acconfig.h--example--PAGE" class="contents">7.1. Example</a></li></ul></li><li><a href="#page--issues--DIR" class="contents">8. Various Issues</a><ul class="contents"><li><a href="#page--issues--sub-dir--PAGE" class="contents">8.1. Creating a Sub-Directory with a Different Configuration</a></li><li><a href="#page--issues--mylib-config--PAGE" class="contents">8.2. mylibrary-config program</a></li><li><a href="#page--issues--rpm-spec--PAGE" class="contents">8.3. Creating an RPM Spec</a></li></ul></li><li><a href="#page--links--PAGE" class="contents">9. Links and References</a></li></ul><hr/></section><section class="page"><header><h2 id="page--intro--PAGE">1. Introduction</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--DIR" class="nav" accesskey="p">Prev</a></td><td><a href="#page--how_it_fits--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--intro--PAGE">Introduction</a></div></nav><ul class="point"><li>The GNU Autotools (Autoconf, Automake and Libtool) are the de-facto standard for portably building C and C++ applications.</li><li>They support all UNIX platforms as well as Microsoft Win32</li><li>As far as the installer is concerned, building the program depends on nothing but a Bourne shell implementation, a C compiler and a standard "make" program.</li><li>The developer requires other tools such as <a href="http://www.gnu.org/software/autoconf/autoconf.html">the Autoconf package</a>, <a href="http://www.perl.com/">Perl</a>, <a href="http://www.gnu.org/software/automake/">the Automake package</a> and <a href="http://www.gnu.org/software/m4/">GNU m4</a>.</li></ul><h2>Philosophy</h2><ul class="point"><li>Autoconf performs some system-wide tests to check for common system parameters: the location of programs, the existence of functions and system calls, their behaviour, the availability of libraries, etc.</li><li>Using this it builds (on each target system) an appropriate makefile and a header file, which can be used to build the package natively</li><li>This is superior than writing various "#ifdef" for every system out there, or writing a different makefile for every system.</li></ul><hr/></section><section class="page"><header><h2 id="page--how_it_fits--PAGE">2. How it all fits together</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--intro--PAGE" class="nav" accesskey="p">Prev</a></td><td><a href="#page--simple_project--DIR" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--how_it_fits--PAGE">How it all fits together</a></div></nav><ul class="point"><li>Automake takes as input the file <code>Makefile.am</code> and produces <code>Makefile.in</code>.</li><li>The "autoconf" program takes as input the file <code>configure.in</code> (or in Autoconf 2.5 the file <code>configure.ac</code>) and generates the <code>./configure</code> script out of it.</li><li>Autoheader takes as input the files <code>acconfig.h</code> and generates the <code>config.h.in</code> template by parsing <code>configure.in</code>.</li><li><code>./configure</code>, when ran by the user generates the normal <code>Makefile</code> out of <code>Makefile.in</code> and optionally processes other files (such as <code>config.h.in</code> -&gt; <code>config.h</code>, an optional RPM Spec, Makefiles in other directories, etc.</li></ul><p><img src="processing-diagram.png" alt="Processing the Files"/></p><hr/></section><section class="page"><header><h2 id="page--simple_project--DIR">3. A Simple Project</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--how_it_fits--PAGE" class="nav" accesskey="p">Prev</a></td><td><a href="#page--simple_project--Makefile.am--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--simple_project--DIR">A Simple Project</a></div></nav><ul class="point"><li>The project in question is the <a href="http://www.shlomifish.org/rwlock/">First-Come First-Served Readers/Writers Lock</a>, which is a very small-scope project with very limited use of Autoconf.</li></ul><hr/></section><section class="page"><header><h2 id="page--simple_project--Makefile.am--PAGE">3.1. The Makefile.am file</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--simple_project--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--simple_project--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--simple_project--DIR" class="nav" accesskey="p">Prev</a></td><td><a href="#page--simple_project--configure.in--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--simple_project--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--simple_project--DIR">A Simple Project</a> → <a href="#page--simple_project--Makefile.am--PAGE">The Makefile.am file</a></div></nav><div class="code_block"><pre>
<span class="Comment"># Define sub-directories of the project</span>
<span class="Statement">SUBDIRS </span>= man

<span class="Comment"># noinst_PROGRAMS are programs that should be compiled but not installed</span>
<span class="Statement">noinst_PROGRAMS </span>= test_rwlock
<span class="Comment"># Source files for test_rwlock</span>
<span class="Type">test_rwlock_SOURCES </span>= test_rwlock.c
<span class="Comment"># Libraries to link against</span>
<span class="Type">test_rwlock_LDADD </span>= libpthread_rwlock_fcfs.la

<span class="Comment"># Libraries that are built using libtool</span>
<span class="Statement">lib_LTLIBRARIES </span>= libpthread_rwlock_fcfs.la
<span class="Comment"># Where to install the headers</span>
<span class="Identifier">libpthread_rwlock_fcfsincludedir</span>=<span class="Identifier">$(includedir)</span>/pthread
<span class="Comment"># The source files of the library</span>
<span class="Type">libpthread_rwlock_fcfs_la_SOURCES </span>= rwlock.c queue.c
<span class="Comment"># A libtool library version numbers</span>
<span class="Type">libpthread_rwlock_fcfs_la_LDFLAGS </span>= -version-info 0:0:0
<span class="Comment"># The headers of the library</span>
<span class="Statement">libpthread_rwlock_fcfsinclude_HEADERS </span>= rwlock_fcfs.h rwlock_fcfs_queue.h

<span class="Comment"># Extra files in the distribution</span>
<span class="Special">EXTRA_DIST </span>+= Docs/FCFS_RWLock_Scheme.txt Docs/FCFS_RWLock_Scheme_RLE.txt
<span class="Special">EXTRA_DIST </span>+= test_rwlock.c
<span class="Special">EXTRA_DIST </span>+= test_queue.cpp

<span class="Special">EXTRA_DIST </span>+= pthread/rwlock_fcfs.h pthread/rwlock_fcfs_queue.h

<span class="Special">EXTRA_DIST </span>+= <span class="Todo">TODO</span>
</pre></div><hr/></section><section class="page"><header><h2 id="page--simple_project--configure.in--PAGE">3.2. The configure.in file</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--simple_project--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--simple_project--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--simple_project--Makefile.am--PAGE" class="nav" accesskey="p">Prev</a></td><td><a href="#page--common_macros--DIR" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--simple_project--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--simple_project--DIR">A Simple Project</a> → <a href="#page--simple_project--configure.in--PAGE">The configure.in file</a></div></nav><div class="code_block"><pre>
<span class="Comment">dnl Process this file with autoconf to produce a configure script.</span>

<span class="Comment">dnl AC_INIT is the first macro that should be called in an Autoconf</span>
<span class="Comment">dnl script. It should be called with one argument that exhibits one</span>
<span class="Comment">dnl of the source files</span>
<span class="Identifier">AC_INIT</span><span class="Special">(</span>rwlock.c<span class="Special">)</span>

<span class="Comment">dnl Initialize Automake</span>
<span class="Comment">dnl The first parameter is the project name</span>
<span class="Comment">dnl The second is the version</span>
<span class="Identifier">AM_INIT_AUTOMAKE</span><span class="Special">(</span>pthread_rwlock_fcfs<span class="Special">,</span> <span class="Constant">0.4</span>.<span class="Constant">0</span><span class="Special">)</span>

<span class="Comment">dnl Initialize libtool</span>
<span class="Identifier">AM_PROG_LIBTOOL</span>

<span class="Comment">dnl Checks for programs.</span>
<span class="Identifier">AC_PROG_CC</span>


<span class="Comment">dnl Checks for libraries.</span>
<span class="Identifier">AC_CHECK_LIB</span><span class="Special">(</span>pthread<span class="Special">,</span> pthread_create<span class="Special">)</span>

<span class="Comment">dnl Checks for header files.</span>
<span class="Identifier">AC_HEADER_STDC</span>
<span class="Identifier">AC_CHECK_HEADERS</span><span class="Special">(</span>sys/time.h unistd.h<span class="Special">)</span>

<span class="Comment">dnl Set the debug flag to no by default</span>
debug_rwlock<span class="Statement">=</span>no

<span class="Comment">dnl Set a command line option to set it otherwise</span>
<span class="Identifier">AC_ARG_ENABLE</span><span class="Special">(</span>debug-rwlock<span class="Special">,</span>
 <span class="Special">[</span>  --enable-debug-rwlock  Enable an RWLock that prints debug notices on the screen. This is a debugging feature which should not be usually enabled<span class="Special">],</span>
 <span class="Special">[</span> debug_rwlock<span class="Statement">=</span>yes
 <span class="Special">])</span>

<span class="Comment">dnl If debug_rwlock is set</span>
<span class="Statement">if</span> <span class="Statement">test</span> <span class="Constant">&quot;x$debug_rwlock&quot;</span> <span class="Statement">=</span> <span class="Constant">&quot;xyes&quot;</span> <span class="Special">;</span> <span class="Statement">then</span>
    <span class="Comment">dnl Define the macro PTHREAD_RWLOCK_FCFS_DEBUG</span>
    <span class="Identifier">AC_DEFINE</span><span class="Special">(</span><span class="Identifier">PTHREAD_RWLOCK_FCFS_DEBUG</span><span class="Special">)</span>
<span class="Statement">fi</span>

<span class="Comment">dnl Checks for typedefs, structures, and compiler characteristics.</span>
<span class="Identifier">AC_C_CONST</span>
<span class="Identifier">AC_HEADER_TIME</span>

<span class="Comment">dnl Checks for library functions.</span>
<span class="Identifier">AC_CHECK_FUNCS</span><span class="Special">(</span>gettimeofday<span class="Special">)</span>

<span class="Comment">dnl Output the files</span>
<span class="Identifier">AC_OUTPUT</span><span class="Special">([</span>Makefile man/Makefile<span class="Special">])</span>
</pre></div><hr/></section><section class="page"><header><h2 id="page--common_macros--DIR">4. Commonly Used configure.in macros</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--simple_project--configure.in--PAGE" class="nav" accesskey="p">Prev</a></td><td><a href="#page--common_macros--AC_DEFINE--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--common_macros--DIR">Commonly Used configure.in macros</a></div></nav><p>This section will cover some commonly used Autoconf Macros.</p><ul class="contentsmain"><li><a href="#page--common_macros--AC_DEFINE--PAGE" class="contents">4.1. AC_DEFINE</a></li><li><a href="#page--common_macros--AC_CHECK_LIB--PAGE" class="contents">4.2. AC_CHECK_LIB</a></li><li><a href="#page--common_macros--AC_ARG_ENABLE--PAGE" class="contents">4.3. AC_ARG_ENABLE</a></li><li><a href="#page--common_macros--AC_OUTPUT--PAGE" class="contents">4.4. AC_OUTPUT</a></li><li><a href="#page--common_macros--AC_CHECK_FUNCS--PAGE" class="contents">4.5. AC_CHECK_FUNCS</a></li><li><a href="#page--common_macros--AC_CHECK_HEADERS--PAGE" class="contents">4.6. AC_CHECK_HEADERS</a></li></ul><hr/></section><section class="page"><header><h2 id="page--common_macros--AC_DEFINE--PAGE">4.1. AC_DEFINE</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--common_macros--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--common_macros--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--common_macros--DIR" class="nav" accesskey="p">Prev</a></td><td><a href="#page--common_macros--AC_CHECK_LIB--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--common_macros--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--common_macros--DIR">Commonly Used configure.in macros</a> → <a href="#page--common_macros--AC_DEFINE--PAGE">AC_DEFINE</a></div></nav><ul class="point"><li>The macro <code>AC_DEFINE</code> can be used anywhere in the script, to define a C preprocessor macro.</li><li>It accepts an optional argument indicating the value of the macro.</li><li>If you want to do shell expansion for the value, use <code>AC_DEFINE_UNQUOTED</code> instead.</li><li>Some Examples:</li></ul><div class="code_block"><pre>
<span class="Identifier">AC_DEFINE</span><span class="Special">(</span><span class="Identifier">HELLO</span><span class="Special">)</span>

<span class="Identifier">AC_DEFINE</span><span class="Special">(</span><span class="Identifier">VERSION</span><span class="Special">,</span> <span class="Constant">&quot;5.6&quot;</span><span class="Special">)</span>

myvar<span class="Statement">=</span><span class="Constant">&quot;foo&quot;</span>
othervar<span class="Statement">=</span><span class="Constant">&quot;bar&quot;</span>
<span class="Identifier">AC_DEFINE_UNQUOTED</span><span class="Special">(</span><span class="Identifier">TEST</span><span class="Special">,</span> <span class="Constant">&quot;$&#x7B;myvar&#x7D;$&#x7B;othervar&#x7D;&quot;</span><span class="Special">)</span>
</pre></div><hr/></section><section class="page"><header><h2 id="page--common_macros--AC_CHECK_LIB--PAGE">4.2. AC_CHECK_LIB</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--common_macros--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--common_macros--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--common_macros--AC_DEFINE--PAGE" class="nav" accesskey="p">Prev</a></td><td><a href="#page--common_macros--AC_ARG_ENABLE--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--common_macros--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--common_macros--DIR">Commonly Used configure.in macros</a> → <a href="#page--common_macros--AC_CHECK_LIB--PAGE">AC_CHECK_LIB</a></div></nav><ul class="point"><li><code>AC_CHECK_LIB</code> checks for a presence of a symbol inside a library.</li><li>It can run optional shell codes, (accepted as the third and fourth arguments) if it succeeds or fails.</li><li>If it succeeds it will prepend <code>-l[library]</code> to compiler flags, and define the preprocessor macro <code>HAVE_LIB[library]</code>.</li><li>Examples:</li></ul><div class="code_block"><pre>
<span class="Identifier">AC_CHECK_LIB</span><span class="Special">(</span>m<span class="Special">,</span> pow<span class="Special">)</span>

<span class="Statement">if</span> <span class="Statement">test</span> <span class="Constant">&quot;x$requires_libavl&quot;</span> <span class="Statement">=</span> <span class="Constant">&quot;xyes&quot;</span> <span class="Special">;</span> <span class="Statement">then</span>
    <span class="Identifier">AC_CHECK_LIB</span><span class="Special">(</span>avl<span class="Special">,</span> avl_create<span class="Special">,</span> <span class="Special">[],</span> <span class="Special">[</span>
        echo <span class="Constant">&quot;Error! You need to have libavl around.&quot;</span>
        exit <span class="Constant">-1</span>
        <span class="Special">])</span>
<span class="Statement">fi</span>
</pre></div><hr/></section><section class="page"><header><h2 id="page--common_macros--AC_ARG_ENABLE--PAGE">4.3. AC_ARG_ENABLE</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--common_macros--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--common_macros--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--common_macros--AC_CHECK_LIB--PAGE" class="nav" accesskey="p">Prev</a></td><td><a href="#page--common_macros--AC_OUTPUT--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--common_macros--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--common_macros--DIR">Commonly Used configure.in macros</a> → <a href="#page--common_macros--AC_ARG_ENABLE--PAGE">AC_ARG_ENABLE</a></div></nav><ul class="point"><li><code>AC_ARG_ENABLE</code> allows you to define another command line option.</li><li>It accepts three arguments:<br/><ol><li>The flag base: the flag would be <code>--enable-[option base]</code></li><li>The help for this option</li><li>The code to execute when the <code>configure</code> script is invoked with this option. In it the command line variable <code>enableval</code> would be set to the argument</li></ol></li><li>Examples:</li></ul><div class="code_block"><pre>
<span class="Identifier">AC_ARG_ENABLE</span><span class="Special">(</span>debug-rwlock<span class="Special">,</span>
 <span class="Special">[</span>  --enable-debug-rwlock  Enable an RWLock that prints debug notices <span class="Statement">\</span>
  on the screen. This is a debugging feature which should not be <span class="Statement">\</span>
  usually enabled<span class="Special">],</span>
 <span class="Special">[</span> debug_rwlock<span class="Statement">=</span>yes
 <span class="Special">])</span>

<span class="Identifier">AC_ARG_ENABLE</span><span class="Special">(</span>states-type<span class="Special">,</span>
 <span class="Special">[</span>  --enable-states-type<span class="Special">[</span><span class="Statement">=</span>state type<span class="Special">]</span> Specify the states type:
                      compact <span class="Special">[</span>default<span class="Special">]</span>: Compact States
                      debug: Debug States <span class="Special">(</span>very slow<span class="Special">)</span>
                      indirect: Indirect Stack States<span class="Special">],</span>
 <span class="Special">[</span> <span class="Statement">if</span>   <span class="Statement">test</span> <span class="Constant">&quot;x$enableval&quot;</span> <span class="Statement">=</span> <span class="Constant">&quot;xcompact&quot;</span> <span class="Special">;</span> <span class="Statement">then</span>
      states_type<span class="Statement">=</span>compact
   elif <span class="Statement">test</span> <span class="Constant">&quot;x$enableval&quot;</span> <span class="Statement">=</span> <span class="Constant">&quot;xdebug&quot;</span> <span class="Special">;</span> <span class="Statement">then</span>
      states_type<span class="Statement">=</span>debug
   elif <span class="Statement">test</span> <span class="Constant">&quot;x$enableval&quot;</span> <span class="Statement">=</span> <span class="Constant">&quot;xindirect&quot;</span> <span class="Special">;</span> <span class="Statement">then</span>
      states_type<span class="Statement">=</span>indirect
   <span class="Statement">else</span>
      echo
      echo <span class="Constant">&quot;Error!&quot;</span>
      echo <span class="Constant">&quot;Unknown states' type&quot;</span>
      exit <span class="Constant">-1</span>
   <span class="Statement">fi</span>
 <span class="Special">])</span>
</pre></div><hr/></section><section class="page"><header><h2 id="page--common_macros--AC_OUTPUT--PAGE">4.4. AC_OUTPUT</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--common_macros--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--common_macros--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--common_macros--AC_ARG_ENABLE--PAGE" class="nav" accesskey="p">Prev</a></td><td><a href="#page--common_macros--AC_CHECK_FUNCS--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--common_macros--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--common_macros--DIR">Commonly Used configure.in macros</a> → <a href="#page--common_macros--AC_OUTPUT--PAGE">AC_OUTPUT</a></div></nav><ul class="point"><li><code>AC_OUTPUT</code> generates files that are required for building the packages.</li><li>Its first argument is a whitespace separated list of files. The script will look for these files along with the suffix <code>.in</code> and convert them to their output files while substituting the output variable values.</li><li>Two optional argument are commands to be executed afterwards, and commands to be executed beforehand.</li><li>Example:</li></ul><div class="code_block"><pre>
<span class="Identifier">AC_OUTPUT</span><span class="Special">([</span>Makefile freecell-solver-config freecell-solver.spec<span class="Special">],</span> <span class="Special">[</span>chmod <span class="Statement">+</span>x freecell-solver-config<span class="Special">])</span>
</pre></div><hr/></section><section class="page"><header><h2 id="page--common_macros--AC_CHECK_FUNCS--PAGE">4.5. AC_CHECK_FUNCS</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--common_macros--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--common_macros--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--common_macros--AC_OUTPUT--PAGE" class="nav" accesskey="p">Prev</a></td><td><a href="#page--common_macros--AC_CHECK_HEADERS--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--common_macros--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--common_macros--DIR">Commonly Used configure.in macros</a> → <a href="#page--common_macros--AC_CHECK_FUNCS--PAGE">AC_CHECK_FUNCS</a></div></nav><ul class="point"><li><code>AC_CHECK_FUNCS</code> checks for the existence of functions in the C standard library.</li><li>If found, the preprocessor macro <code>HAVE_[function]</code> is defined.</li></ul><hr/></section><section class="page"><header><h2 id="page--common_macros--AC_CHECK_HEADERS--PAGE">4.6. AC_CHECK_HEADERS</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--common_macros--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--common_macros--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--common_macros--AC_CHECK_FUNCS--PAGE" class="nav" accesskey="p">Prev</a></td><td><a href="#page--changequote--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--common_macros--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--common_macros--DIR">Commonly Used configure.in macros</a> → <a href="#page--common_macros--AC_CHECK_HEADERS--PAGE">AC_CHECK_HEADERS</a></div></nav><ul class="point"><li><code>AC_CHECK_HEADERS</code> check for the existence of the header files specified as the first argument.</li><li>If they are found the preprocessor macro <code>HAVE_[header]</code> (in all caps) is defined.</li></ul><hr/></section><section class="page"><header><h2 id="page--changequote--PAGE">5. Using changequote</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--common_macros--AC_CHECK_HEADERS--PAGE" class="nav" accesskey="p">Prev</a></td><td><a href="#page--Makefile_am--DIR" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--changequote--PAGE">Using changequote</a></div></nav><ul class="point"><li>The m4 preprocessor which is used to process <code>configure.in</code> uses <code>[</code> and <code>]</code> for grouping arguments.</li><li>If you want to use them yourself, type <code>changequote(, )</code> at the beginning of the offending code and <code>changequote([, ])</code> afterwards.</li><li>Here's an example:</li></ul><div class="code_block"><pre>
<span class="Identifier">AC_ARG_ENABLE</span><span class="Special">(</span>max-num-stacks<span class="Special">,</span>
<span class="Special">[</span>  --enable-max-num-stacks<span class="Special">[</span><span class="Statement">=</span>stacks num<span class="Special">]</span> Set the maximal number of Stacks<span class="Special">],</span>
<span class="Special">[</span> <span class="Statement">if</span>   <span class="Statement">test</span> <span class="Constant">&quot;x$enableval&quot;</span> <span class="Statement">=</span> <span class="Constant">&quot;x&quot;</span> <span class="Special">;</span> <span class="Statement">then</span>
     max_num_stacks<span class="Statement">=</span><span class="Constant">8</span>
  <span class="Statement">else</span>
      changequote<span class="Special">(,</span> <span class="Special">)</span>
      <span class="Comment"># Check if it's indeed a number</span>
      <span class="Statement">if</span> echo <span class="Constant">&quot;0$enableval&quot;</span> <span class="Statement">|</span> grep <span class="Constant">'[^0-9]'</span> <span class="Statement">&gt;</span> /dev/null <span class="Special">;</span> <span class="Statement">then</span>
          echo
          echo <span class="Constant">&quot;Error!&quot;</span>
          echo <span class="Constant">&quot;max-num-stacks should be a number!&quot;</span>
          exit <span class="Constant">-1</span>
      elif expr $enableval <span class="Statement">\&lt;</span> <span class="Constant">8</span> <span class="Statement">&gt;</span> /dev/null <span class="Special">;</span> <span class="Statement">then</span>
          echo
          echo <span class="Constant">&quot;Error!&quot;</span>
          echo <span class="Constant">&quot;max-num-stacks cannot be lower than 8&quot;</span>
          exit <span class="Constant">-1</span>
      elif expr $enableval <span class="Statement">\&gt;</span> <span class="Constant">20</span> <span class="Statement">&gt;</span> /dev/null <span class="Special">;</span> <span class="Statement">then</span>
          echo
          echo <span class="Constant">&quot;Error!&quot;</span>
          echo <span class="Constant">&quot;max-num-stacks cannot be greater than 20&quot;</span>
          exit <span class="Constant">-1</span>
      <span class="Statement">else</span>
          max_num_stacks<span class="Statement">=</span><span class="Constant">&quot;$enableval&quot;</span>
      <span class="Statement">fi</span>
      changequote<span class="Special">([,</span> <span class="Special">])</span>
  <span class="Statement">fi</span><span class="Special">])</span>
</pre></div><hr/></section><section class="page"><header><h2 id="page--Makefile_am--DIR">6. Format of the Makefile.am File</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--changequote--PAGE" class="nav" accesskey="p">Prev</a></td><td><a href="#page--Makefile_am--super--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--Makefile_am--DIR">Format of the Makefile.am File</a></div></nav><ul class="contentsmain"><li><a href="#page--Makefile_am--super--PAGE" class="contents">6.1. Super Targets</a></li><li><a href="#page--Makefile_am--sources--PAGE" class="contents">6.2. Specifying the source files</a></li><li><a href="#page--Makefile_am--ldadd--PAGE" class="contents">6.3. Linking with internal libraries</a></li><li><a href="#page--Makefile_am--headers--PAGE" class="contents">6.4. Library Headers</a></li><li><a href="#page--Makefile_am--extra_dist--PAGE" class="contents">6.5. EXTRA_DIST</a></li><li><a href="#page--Makefile_am--plain--PAGE" class="contents">6.6. Plain Rules</a></li><li><a href="#page--Makefile_am--lt-version--PAGE" class="contents">6.7. Libtool Library Versioning</a></li></ul><hr/></section><section class="page"><header><h2 id="page--Makefile_am--super--PAGE">6.1. Super Targets</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--Makefile_am--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--Makefile_am--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--Makefile_am--DIR" class="nav" accesskey="p">Prev</a></td><td><a href="#page--Makefile_am--sources--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--Makefile_am--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--Makefile_am--DIR">Format of the Makefile.am File</a> → <a href="#page--Makefile_am--super--PAGE">Super Targets</a></div></nav><ul class="point"><li>There are several top targets available. In each one, you can specify several targets to build.</li><li>A partial list is:<br/><ol><li><code>bin_PROGRAMS</code> - programs that should be compiled and installed.</li><li><code>bin_SCRIPTS</code> - programs that should be installed but not compiled</li><li><code>man_MANS</code> - man pages that should be installed.</li><li><code>lib_LTLIBRARIES</code> - Libraries that should be built using libtool.</li><li><code>noinst_PROGRAMS</code> - Programs that should be compiled but not installed.</li></ol></li></ul><hr/></section><section class="page"><header><h2 id="page--Makefile_am--sources--PAGE">6.2. Specifying the source files</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--Makefile_am--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--Makefile_am--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--Makefile_am--super--PAGE" class="nav" accesskey="p">Prev</a></td><td><a href="#page--Makefile_am--ldadd--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--Makefile_am--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--Makefile_am--DIR">Format of the Makefile.am File</a> → <a href="#page--Makefile_am--sources--PAGE">Specifying the source files</a></div></nav><ul class="point"><li>One can specify the source files for each super target by typing the base name of the package (with <code>_</code>'s instead of <code>-</code>'s etc) followed by <code>_SOURCES</code> followed by an equal sign and a list of the sources.</li><li>Example:</li></ul><div class="code_block"><pre>
<span class="Statement">lib_LTLIBRARIES </span>= libpthread_rwlock_fcfs.la
<span class="Type">libpthread_rwlock_fcfs_la_SOURCES </span>= rwlock.c queue.c
</pre></div><hr/></section><section class="page"><header><h2 id="page--Makefile_am--ldadd--PAGE">6.3. Linking with internal libraries</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--Makefile_am--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--Makefile_am--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--Makefile_am--sources--PAGE" class="nav" accesskey="p">Prev</a></td><td><a href="#page--Makefile_am--headers--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--Makefile_am--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--Makefile_am--DIR">Format of the Makefile.am File</a> → <a href="#page--Makefile_am--ldadd--PAGE">Linking with internal libraries</a></div></nav><ul class="point"><li>To link a target with an internal library specify the target name as before along with <code>_LDADD</code> variable and type the library name ending with <code>.la</code>.</li></ul><hr/></section><section class="page"><header><h2 id="page--Makefile_am--headers--PAGE">6.4. Library Headers</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--Makefile_am--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--Makefile_am--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--Makefile_am--ldadd--PAGE" class="nav" accesskey="p">Prev</a></td><td><a href="#page--Makefile_am--extra_dist--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--Makefile_am--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--Makefile_am--DIR">Format of the Makefile.am File</a> → <a href="#page--Makefile_am--headers--PAGE">Library Headers</a></div></nav><ul class="point"><li>Headers of libraries to be installed during the installation are specified using the <code>_HEADERS</code> directive.</li></ul><hr/></section><section class="page"><header><h2 id="page--Makefile_am--extra_dist--PAGE">6.5. EXTRA_DIST</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--Makefile_am--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--Makefile_am--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--Makefile_am--headers--PAGE" class="nav" accesskey="p">Prev</a></td><td><a href="#page--Makefile_am--plain--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--Makefile_am--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--Makefile_am--DIR">Format of the Makefile.am File</a> → <a href="#page--Makefile_am--extra_dist--PAGE">EXTRA_DIST</a></div></nav><ul class="point"><li>The <code>EXTRA_DIST</code> argument holds a list of all the files that are part of the package, but are not installed by default and were not specified in any other way.</li><li>It includes such odds and ends as README files, internal headers and maintenance scripts.</li></ul><hr/></section><section class="page"><header><h2 id="page--Makefile_am--plain--PAGE">6.6. Plain Rules</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--Makefile_am--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--Makefile_am--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--Makefile_am--extra_dist--PAGE" class="nav" accesskey="p">Prev</a></td><td><a href="#page--Makefile_am--lt-version--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--Makefile_am--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--Makefile_am--DIR">Format of the Makefile.am File</a> → <a href="#page--Makefile_am--plain--PAGE">Plain Rules</a></div></nav><ul class="point"><li>It is possible to specify plain rules in an Automake file, just as you would in a normal makefile.</li><li>Within these rules one can use the meta-variables <code>$&lt;</code> as the source and <code>$@</code> as the target.</li></ul><hr/></section><section class="page"><header><h2 id="page--Makefile_am--lt-version--PAGE">6.7. Libtool Library Versioning</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--Makefile_am--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--Makefile_am--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--Makefile_am--plain--PAGE" class="nav" accesskey="p">Prev</a></td><td><a href="#page--acconfig.h--DIR" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--Makefile_am--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--Makefile_am--DIR">Format of the Makefile.am File</a> → <a href="#page--Makefile_am--lt-version--PAGE">Libtool Library Versioning</a></div></nav><ul class="point"><li>In the flag <code>mylibrary_LDFLAGS</code> one should specify an option like that: <code>-version-info [CURRENT]:[REVISION]:[AGE]</code>.</li><li><code>[CURRENT]</code> is the most recent version of the library that the library supports.</li><li><code>[REVISION]</code> is the implementation number of the current interface (i.e: patch releases)</li><li><code>[AGE]</code> is the number of versions back that this version is still backwards compatible with.</li></ul><hr/></section><section class="page"><header><h2 id="page--acconfig.h--DIR">7. Format of acconfig.h</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--Makefile_am--lt-version--PAGE" class="nav" accesskey="p">Prev</a></td><td><a href="#page--acconfig.h--example--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--acconfig.h--DIR">Format of acconfig.h</a></div></nav><ul class="point"><li><code>acconfig.h</code> is used to generate <code>config.h.in</code>, which is the file used to generate <code>config.h</code>.</li><li>It should contain all the macro definitions needed to control the program.</li><li>In it, a line of <code>#undef MYMACRO</code> specifies that the macro should not be defined by default. If it was defined during the run of the ./configure script, it would replace it as such.</li><li>A line containing <code>#define MYMACRO</code> specifies that the macro would always be defined, but its value may vary.</li><li>The utility <code>autoheader</code> can help in creating an initial <code>config.h.in</code> file.</li></ul><hr/></section><section class="page"><header><h2 id="page--acconfig.h--example--PAGE">7.1. Example</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--acconfig.h--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--acconfig.h--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--acconfig.h--DIR" class="nav" accesskey="p">Prev</a></td><td><a href="#page--issues--DIR" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--acconfig.h--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--acconfig.h--DIR">Format of acconfig.h</a> → <a href="#page--acconfig.h--example--PAGE">Example</a></div></nav><div class="code_block"><pre>
<span class="Comment">/*</span>
<span class="Comment">    config.h - Configuration file for Freecell Solver</span>

<span class="Comment">    Written by Shlomi Fish, 2000</span>

<span class="Comment">    This file is distributed under the public domain.</span>
<span class="Comment">    (It is not copyrighted).</span>
<span class="Comment">*/</span>

<span class="PreProc">#ifndef FC_SOLVE__CONFIG_H</span>
<span class="PreProc">#define FC_SOLVE__CONFIG_H</span>

<span class="PreProc">#ifdef __cplusplus</span>
<span class="Type">extern</span> <span class="Constant">&quot;C&quot;</span> &#x7B;
<span class="PreProc">#endif</span>

<span class="PreProc">#undef DEBUG_STATES</span>
<span class="PreProc">#undef COMPACT_STATES</span>
<span class="PreProc">#undef INDIRECT_STACK_STATES</span>

<span class="PreProc">#undef CARD_DEBUG_PRES</span>

<span class="Comment">/*</span>
<span class="Comment"> * Define this macro if the C compiler supports the keyword inline or</span>
<span class="Comment"> * a similar keyword that was found by Autoconf (and defined as inline).</span>
<span class="Comment"> * */</span>
<span class="PreProc">#undef HAVE_C_INLINE</span>


<span class="Comment">/*</span>
<span class="Comment">    The sort margin size for the previous states array.</span>
<span class="Comment">*/</span>
<span class="PreProc">#define PREV_STATES_SORT_MARGIN </span><span class="Constant">32</span>
<span class="Comment">/*</span>
<span class="Comment">    The amount prev_states grow by each time it each resized.</span>
<span class="Comment">    Should be greater than 0 and in order for the program to be</span>
<span class="Comment">    efficient, should be much bigger than</span>
<span class="Comment">    PREV_STATES_SORT_MARGIN.</span>
<span class="Comment">*/</span>
<span class="PreProc">#define PREV_STATES_GROW_BY </span><span class="Constant">128</span>

<span class="Comment">/*</span>
<span class="Comment">    The amount the pack pointers array grows by. Shouldn't be too high</span>
<span class="Comment">    because it doesn't happen too often.</span>
<span class="Comment">*/</span>
<span class="PreProc">#define IA_STATE_PACKS_GROW_BY </span><span class="Constant">32</span>

<span class="Comment">/*</span>
<span class="Comment"> * The maximal number of Freecells. For efficiency's sake it should be a</span>
<span class="Comment"> * multiple of 4.</span>
<span class="Comment"> * */</span>

<span class="PreProc">#define MAX_NUM_FREECELLS </span><span class="Constant">4</span>

<span class="Comment">/*</span>
<span class="Comment"> * The maximal number of Stacks. For efficiency's sake it should be a</span>
<span class="Comment"> * multiple of 4.</span>
<span class="Comment"> * */</span>

<span class="PreProc">#define MAX_NUM_STACKS </span><span class="Constant">10</span>
<span class="Comment">/*</span>
<span class="Comment"> * The maximal number of initial cards that can be found in a stack.</span>
<span class="Comment"> * */</span>
<span class="PreProc">#define MAX_NUM_INITIAL_CARDS_IN_A_STACK </span><span class="Constant">8</span>

<span class="PreProc">#define MAX_NUM_DECKS </span><span class="Constant">2</span>


<span class="PreProc">#define FCS_STATE_STORAGE_INDIRECT </span><span class="Constant">0</span>
<span class="PreProc">#define FCS_STATE_STORAGE_INTERNAL_HASH </span><span class="Constant">1</span>
<span class="PreProc">#define FCS_STATE_STORAGE_LIBAVL_AVL_TREE </span><span class="Constant">2</span>
<span class="PreProc">#define FCS_STATE_STORAGE_LIBAVL_REDBLACK_TREE </span><span class="Constant">3</span>
<span class="PreProc">#define FCS_STATE_STORAGE_LIBREDBLACK_TREE </span><span class="Constant">4</span>
<span class="PreProc">#define FCS_STATE_STORAGE_GLIB_TREE </span><span class="Constant">5</span>
<span class="PreProc">#define FCS_STATE_STORAGE_GLIB_HASH </span><span class="Constant">6</span>
<span class="PreProc">#define FCS_STATE_STORAGE_DB_FILE </span><span class="Constant">7</span>

<span class="PreProc">#define FCS_STACK_STORAGE_INTERNAL_HASH </span><span class="Constant">0</span>
<span class="PreProc">#define FCS_STACK_STORAGE_LIBAVL_AVL_TREE </span><span class="Constant">1</span>
<span class="PreProc">#define FCS_STACK_STORAGE_LIBAVL_REDBLACK_TREE </span><span class="Constant">2</span>
<span class="PreProc">#define FCS_STACK_STORAGE_LIBREDBLACK_TREE </span><span class="Constant">3</span>
<span class="PreProc">#define FCS_STACK_STORAGE_GLIB_TREE </span><span class="Constant">4</span>
<span class="PreProc">#define FCS_STACK_STORAGE_GLIB_HASH </span><span class="Constant">5</span>

<span class="PreProc">#undef FCS_STATE_STORAGE</span>
<span class="PreProc">#undef FCS_STACK_STORAGE</span>

<span class="PreProc">#ifdef __cplusplus</span>
&#x7D;
<span class="PreProc">#endif</span>

<span class="PreProc">#endif</span>
</pre></div><hr/></section><section class="page"><header><h2 id="page--issues--DIR">8. Various Issues</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--acconfig.h--example--PAGE" class="nav" accesskey="p">Prev</a></td><td><a href="#page--issues--sub-dir--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--issues--DIR">Various Issues</a></div></nav><ul class="contentsmain"><li><a href="#page--issues--sub-dir--PAGE" class="contents">8.1. Creating a Sub-Directory with a Different Configuration</a></li><li><a href="#page--issues--mylib-config--PAGE" class="contents">8.2. mylibrary-config program</a></li><li><a href="#page--issues--rpm-spec--PAGE" class="contents">8.3. Creating an RPM Spec</a></li></ul><hr/></section><section class="page"><header><h2 id="page--issues--sub-dir--PAGE">8.1. Creating a Sub-Directory with a Different Configuration</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--issues--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--issues--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--issues--DIR" class="nav" accesskey="p">Prev</a></td><td><a href="#page--issues--mylib-config--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--issues--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--issues--DIR">Various Issues</a> → <a href="#page--issues--sub-dir--PAGE">Creating a Sub-Directory with a Different Configuration</a></div></nav><ul class="point"><li>To have a directory with its own separate <code>configure</code> script, first put it in the <code>SUBDIRS</code> variable of Makefile.am</li><li>Then use the <code>AC_CONFIG_SUBDIRS</code> macro in <code>configure.in</code> to configure them as separate sub-directories.</li><li>If a sub-directory inherits from the same subdirectory, then they will also be linked against all the shared libraries, which may not be desirable.</li></ul><hr/></section><section class="page"><header><h2 id="page--issues--mylib-config--PAGE">8.2. mylibrary-config program</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--issues--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--issues--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--issues--sub-dir--PAGE" class="nav" accesskey="p">Prev</a></td><td><a href="#page--issues--rpm-spec--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--issues--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--issues--DIR">Various Issues</a> → <a href="#page--issues--mylib-config--PAGE">mylibrary-config program</a></div></nav><ul class="point"><li>To have a mylibrary-config script, you need to put it in <code>AC_OUTPUT</code>.</li><li><code>configure</code> would expect a <code>mylibrary-config.in</code> file to be present, so you'll need to write a template for it there.</li><li>You can look at pre-existing packages such as <a href="http://fc-solve.shlomifish.org/">Freecell Solver</a> or <a href="http://www.gtk.org/">GLib</a> for reference.</li></ul><hr/></section><section class="page"><header><h2 id="page--issues--rpm-spec--PAGE">8.3. Creating an RPM Spec</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--issues--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--issues--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--issues--mylib-config--PAGE" class="nav" accesskey="p">Prev</a></td><td><a href="#page--links--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--issues--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--issues--DIR">Various Issues</a> → <a href="#page--issues--rpm-spec--PAGE">Creating an RPM Spec</a></div></nav><ul class="point"><li>To generate an RPM Spec, include a template for the RPM as <code>mypackage.spec.in</code> in the main directory of the package.</li><li>The template is identical to the spec except that the <code>Version:</code> field should contain <code>@VERSION@</code> as its contents.</li><li>Add <code>mypackage.spec</code> to <code>AC_OUTPUT</code>.</li><li>And add both <code>mypackage.spec</code> and <code>mypackage.spec.in</code> to the <code>EXTRA_DIST</code> of <code>Makefile.am</code>.</li><li>Now, invoking <code>rpm -tb</code> with the archive name as a parameter would build an RPM out of it.</li></ul><hr/></section><section class="page"><header><h2 id="page--links--PAGE">9. Links and References</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--issues--rpm-spec--PAGE" class="nav" accesskey="p">Prev</a></td><td><b>Next</b></td></tr></table><div class="bread"><a href="#page--DIR">GNU Autoconf, Automake and Libtool</a> → <a href="#page--links--PAGE">Links and References</a></div></nav><h2>Manuals</h2><p><a href="http://www.gnu.org/manual/autoconf-2.53/autoconf.html">The Autoconf Manual</a></p><p><a href="http://www.gnu.org/manual/automake-1.6.1/automake.html">The Automake Manual</a></p><p><a href="http://www.gnu.org/manual/libtool-1.4.2/libtool.html">The Libtool Manual</a></p><p><a href="http://www.gnu.org/manual/m4-1.4/m4.html">GNU m4</a></p><h2>Other Sources of Information</h2><p><a href="http://www.gnu.org/software/autoconf/autoconf.html">Autoconf</a>, <a href="http://www.gnu.org/software/automake/">Automake</a> and <a href="http://www.gnu.org/software/libtool/">Libtool</a><br/><a href="http://sources.redhat.com/autobook/">Autobook</a> - an online book about the GNU Autotools<br/><a href="http://www.amath.washington.edu/~lf/tutorials/autoconf/">An Autoconf Tutorial</a><br/><a href="http://seul.org/docs/autotut/">Autotut - an Autotools tutorial</a><br/></p><h2><a href="http://www.gnu.org/software/ac-archive/">Autoconf Macros Archive</a></h2><p>Contains a lot of predefined macros which are free for use.</p><hr/></section></body></html>