<?xml version="1.0" encoding="utf-8"?><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-GB" lang="en-GB"><head><meta charset="utf-8"/><link rel="stylesheet" href="style.css" type="text/css"/><title>Meta-Data Database Access</title></head><body><section class="page"><header><h2 id="page--DIR">Meta-Data Database Access</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--DIR" class="nav" accesskey="c">Contents</a></td><td><b>Up</b></td><td><b>Prev</b></td><td><a href="#page--intro--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--DIR">Meta-Data Database Access</a></div></nav><ul class="contentsmain"><li><a href="#page--intro--PAGE" class="contents">1. Introduction</a></li><li><a href="#page--example--DIR" class="contents">2. Example</a><ul class="contents"><li><a href="#page--example--wheres_the_code--PAGE" class="contents">2.1. Where's the code?</a></li></ul></li><li><a href="#page--future--PAGE" class="contents">3. Future Directions</a></li></ul><h2 id="licence">Licence</h2><p xmlns:dct="http://purl.org/dc/terms/" xmlns:vcard="http://www.w3.org/2001/vcard-rdf/3.0#"><a rel="license" href="http://creativecommons.org/publicdomain/zero/1.0/"><img src="https://i.creativecommons.org/p/zero/1.0/88x31.png" style="border-style:none" alt="CC0"/></a><br/>To the extent possible under law, <a rel="dct:publisher" href="http://www.shlomifish.org/"><span property="dct:title">Shlomi Fish</span></a> has waived all copyright and related or neighbouring rights to <span property="dct:title">MDDA</span>. This work is published from: <span property="vcard:Country" datatype="dct:ISO3166" content="IL" about="http://www.shlomifish.org/">Israel</span>.</p><hr/></section><section class="page"><header><h2 id="page--intro--PAGE">1. Introduction</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--DIR" class="nav" accesskey="p">Prev</a></td><td><a href="#page--example--DIR" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--DIR">Meta-Data Database Access</a> → <a href="#page--intro--PAGE">Introduction</a></div></nav><ul class="point"><li>Meta-Data Database Access (or MDDA for short) is a name which I gave to a methodology that facilitates the maintenance of code that interacts with databases.</li><li>With MDDA, one enumerates the fields inside the database with an array of Perl 5 data-structures that describes them.</li><li>That way adding or modifying the fields of a table will many times involve only one or two modification to the code, instead of completely going all over it.</li></ul><hr/></section><section class="page"><header><h2 id="page--example--DIR">2. Example</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--intro--PAGE" class="nav" accesskey="p">Prev</a></td><td><a href="#page--example--wheres_the_code--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--DIR">Meta-Data Database Access</a> → <a href="#page--example--DIR">Example</a></div></nav><table class="mycode"><tr class="mycode"><td class="mycode"><pre class="mycode">
<span class="Constant">'</span><span class="Constant">users</span><span class="Constant">'</span> =&gt;
{
    <span class="Constant">'</span><span class="Constant">fields</span><span class="Constant">'</span> =&gt;
    [
        {
            <span class="Constant">'</span><span class="Constant">name</span><span class="Constant">'</span> =&gt; <span class="Constant">&quot;</span><span class="Constant">User_ID</span><span class="Constant">&quot;</span>,
            <span class="Constant">'</span><span class="Constant">type</span><span class="Constant">'</span> =&gt; <span class="Constant">&quot;</span><span class="Constant">int32</span><span class="Constant">&quot;</span>,
            <span class="Constant">'</span><span class="Constant">input</span><span class="Constant">'</span> =&gt; { <span class="Constant">'</span><span class="Constant">type</span><span class="Constant">'</span> =&gt; <span class="Constant">&quot;</span><span class="Constant">auto</span><span class="Constant">&quot;</span>, <span class="Constant">'</span><span class="Constant">method</span><span class="Constant">'</span> =&gt; <span class="Constant">&quot;</span><span class="Constant">get-new-id</span><span class="Constant">&quot;</span>, <span class="Constant">&quot;</span><span class="Constant">primary_key</span><span class="Constant">&quot;</span> =&gt; <span class="Constant">1</span>, },
            <span class="Constant">'</span><span class="Constant">display</span><span class="Constant">'</span> =&gt; { <span class="Constant">'</span><span class="Constant">type</span><span class="Constant">'</span> =&gt; <span class="Constant">&quot;</span><span class="Constant">hidden</span><span class="Constant">&quot;</span> },
        },
        {
            <span class="Constant">'</span><span class="Constant">name</span><span class="Constant">'</span> =&gt; <span class="Constant">'</span><span class="Constant">Name</span><span class="Constant">'</span>,
            <span class="Constant">'</span><span class="Constant">type</span><span class="Constant">'</span> =&gt; <span class="Constant">&quot;</span><span class="Constant">varchar</span><span class="Constant">&quot;</span>,
            <span class="Constant">'</span><span class="Constant">type_params</span><span class="Constant">'</span> =&gt; { <span class="Constant">'</span><span class="Constant">len</span><span class="Constant">'</span> =&gt; <span class="Constant">255</span> },
        },
        {
            <span class="Constant">'</span><span class="Constant">name</span><span class="Constant">'</span> =&gt; <span class="Constant">'</span><span class="Constant">Username</span><span class="Constant">'</span>,
            <span class="Constant">'</span><span class="Constant">type</span><span class="Constant">'</span> =&gt; <span class="Constant">&quot;</span><span class="Constant">varchar</span><span class="Constant">&quot;</span>,
            <span class="Constant">'</span><span class="Constant">type_params</span><span class="Constant">'</span> =&gt; { <span class="Constant">'</span><span class="Constant">len</span><span class="Constant">'</span> =&gt; <span class="Constant">30</span> },
            <span class="Constant">'</span><span class="Constant">input_params</span><span class="Constant">'</span> =&gt;
            [
                {
                    <span class="Constant">'</span><span class="Constant">type</span><span class="Constant">'</span> =&gt; <span class="Constant">'</span><span class="Constant">unique</span><span class="Constant">'</span>,
                },
                {
                    <span class="Constant">'</span><span class="Constant">type</span><span class="Constant">'</span> =&gt; <span class="Constant">&quot;</span><span class="Constant">not_match</span><span class="Constant">&quot;</span>,
                    <span class="Constant">'</span><span class="Constant">regex</span><span class="Constant">'</span> =&gt; <span class="Constant">'</span><span class="Constant">^new$</span><span class="Constant">'</span>,
                    <span class="Constant">'</span><span class="Constant">comment</span><span class="Constant">'</span> =&gt; <span class="Constant">&quot;</span><span class="Constant">new is a reserved word and cannot be assigned as a username</span><span class="Constant">&quot;</span>,
                },
                {
                    <span class="Constant">'</span><span class="Constant">type</span><span class="Constant">'</span> =&gt; <span class="Constant">'</span><span class="Constant">match</span><span class="Constant">'</span>,
                    <span class="Constant">'</span><span class="Constant">regex</span><span class="Constant">'</span> =&gt; <span class="Constant">'</span><span class="Constant">^[a-zA-Z]\w*$</span><span class="Constant">'</span> ,
                    <span class="Constant">'</span><span class="Constant">comment</span><span class="Constant">'</span> =&gt; <span class="Constant">&quot;</span><span class="Constant">The username must start with a letter and extend with letters, digits and underscores</span><span class="Constant">&quot;</span>,
                },

           ],
           <span class="Constant">'</span><span class="Constant">display</span><span class="Constant">'</span> =&gt; { <span class="Constant">'</span><span class="Constant">type</span><span class="Constant">'</span> =&gt; <span class="Constant">&quot;</span><span class="Constant">constant</span><span class="Constant">&quot;</span> },
        },
        {
            <span class="Constant">'</span><span class="Constant">name</span><span class="Constant">'</span> =&gt; <span class="Constant">&quot;</span><span class="Constant">Super_Admin</span><span class="Constant">&quot;</span>,
            <span class="Constant">'</span><span class="Constant">title</span><span class="Constant">'</span> =&gt; <span class="Constant">&quot;</span><span class="Constant">Super Admin Flag</span><span class="Constant">&quot;</span>,
            <span class="Constant">'</span><span class="Constant">type</span><span class="Constant">'</span> =&gt; <span class="Constant">&quot;</span><span class="Constant">bool</span><span class="Constant">&quot;</span>,
            <span class="Constant">'</span><span class="Constant">input</span><span class="Constant">'</span> =&gt; { <span class="Constant">'</span><span class="Constant">type</span><span class="Constant">'</span> =&gt; <span class="Constant">&quot;</span><span class="Constant">auto</span><span class="Constant">&quot;</span>, <span class="Constant">'</span><span class="Constant">method</span><span class="Constant">'</span> =&gt; <span class="Constant">&quot;</span><span class="Constant">by-value</span><span class="Constant">&quot;</span>, <span class="Constant">'</span><span class="Constant">value</span><span class="Constant">'</span> =&gt; <span class="Constant">0</span>}
        },
        {
            <span class="Constant">'</span><span class="Constant">name</span><span class="Constant">'</span> =&gt; <span class="Constant">&quot;</span><span class="Constant">Password</span><span class="Constant">&quot;</span>,
            <span class="Constant">'</span><span class="Constant">type</span><span class="Constant">'</span> =&gt; <span class="Constant">&quot;</span><span class="Constant">varchar</span><span class="Constant">&quot;</span>,
            <span class="Constant">'</span><span class="Constant">type_params</span><span class="Constant">'</span> =&gt; { <span class="Constant">'</span><span class="Constant">len</span><span class="Constant">'</span> =&gt; <span class="Constant">255</span> },
            <span class="Constant">'</span><span class="Constant">display</span><span class="Constant">'</span> =&gt; {<span class="Constant">'</span><span class="Constant">type</span><span class="Constant">'</span> =&gt; <span class="Constant">&quot;</span><span class="Constant">password</span><span class="Constant">&quot;</span> },
        },
        {
            <span class="Constant">'</span><span class="Constant">name</span><span class="Constant">'</span> =&gt; <span class="Constant">&quot;</span><span class="Constant">Email</span><span class="Constant">&quot;</span>,
            <span class="Constant">'</span><span class="Constant">title</span><span class="Constant">'</span> =&gt; <span class="Constant">&quot;</span><span class="Constant">E-Mail</span><span class="Constant">&quot;</span>,
            <span class="Constant">'</span><span class="Constant">type</span><span class="Constant">'</span> =&gt; <span class="Constant">&quot;</span><span class="Constant">email</span><span class="Constant">&quot;</span>,
            <span class="Constant">'</span><span class="Constant">type_params</span><span class="Constant">'</span> =&gt; { <span class="Constant">'</span><span class="Constant">len</span><span class="Constant">'</span> =&gt; <span class="Constant">255</span> },
        },
    ],
    <span class="Constant">'</span><span class="Constant">derived-tables</span><span class="Constant">'</span> =&gt; [ <span class="Constant">&quot;</span><span class="Constant">permissions</span><span class="Constant">&quot;</span> ],
    <span class="Constant">'</span><span class="Constant">triggers</span><span class="Constant">'</span> =&gt;
    {
        <span class="Constant">'</span><span class="Constant">add</span><span class="Constant">'</span> =&gt;
        [
            <span class="Constant">&quot;</span><span class="Constant">INSERT INTO permissions (User_ID, Club_ID, Seminars, Subjects) SELECT </span><span class="Special">\$</span><span class="Constant">F{User_ID}, clubs.Club_ID, 0, 0 FROM clubs</span><span class="Constant">&quot;</span>,
        ],
        <span class="Constant">'</span><span class="Constant">delete</span><span class="Constant">'</span> =&gt;
        [
            <span class="Constant">&quot;</span><span class="Constant">DELETE FROM permissions WHERE User_ID = </span><span class="Special">\$</span><span class="Constant">F{User_ID}</span><span class="Constant">&quot;</span>,
        ],
    },
}
</pre></td></tr></table><hr/></section><section class="page"><header><h2 id="page--example--wheres_the_code--PAGE">2.1. Where's the code?</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--example--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--example--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--example--DIR" class="nav" accesskey="p">Prev</a></td><td><a href="#page--future--PAGE" class="nav" accesskey="n">Next</a></td></tr></table><div class="bread"><a href="#page--example--DIR">Meta-Data Database Access</a> → <a href="#page--example--DIR">Example</a> → <a href="#page--example--wheres_the_code--PAGE">Where's the code?</a></div></nav><h2>Do you honestly need it?</h2><table class="border1"><tr><td><p class="quote">"Show me your code and conceal your data structures, and I shall continue to be mystified. Show me your data structures, and I won't usually need your code; it'll be obvious."</p><div class="indent">Fred Brooks via Eric S. Raymond via myself.</div></td></tr></table><p>For more information refer to the <a href="http://www.catb.org/~esr/writings/cathedral-bazaar/cathedral-bazaar/ar01s06.html">chapter "When is a Rose Not a Rose?"</a> in Eric Raymond's "The Cathedral and the Bazaar".</p><hr/></section><section class="page"><header><h2 id="page--future--PAGE">3. Future Directions</h2></header><nav><table class="page-nav-bar top"><tr><td><a href="#page--DIR" class="nav" accesskey="c">Contents</a></td><td><a href="#page--DIR" class="nav" accesskey="u">Up</a></td><td><a href="#page--example--wheres_the_code--PAGE" class="nav" accesskey="p">Prev</a></td><td><b>Next</b></td></tr></table><div class="bread"><a href="#page--DIR">Meta-Data Database Access</a> → <a href="#page--future--PAGE">Future Directions</a></div></nav><ul class="point"><li>MDDA for more than one table.</li><li>MDDA for tree-like structures.</li><li>Writing a specification language that can be compiled into a Perl data structure, but is less verbose.</li><li>User-land type aliases, type inheritance, etc.</li><li>Stateful MDDA Programs, like synchronous ones that power banks or insurance companies.</li></ul><hr/></section></body></html>