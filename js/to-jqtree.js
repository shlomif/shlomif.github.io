"use strict";function myrepeat(s,count){if(count<1)return"";let result="",pattern=s.valueOf();for(;0<count;)1&count&&(result+=pattern),count>>=1,pattern+=pattern;return result}function get_base_relative_path(args){const rel_path=args.rel_path;return"./"+myrepeat("../",(rel_path.match(/\//g)||[]).length)}function get_relative_path(args){return get_base_relative_path(args)+args.to}function shlomif_get_relative_path_callback(rel_path){const prefix=get_base_relative_path({rel_path:rel_path});return function(to){return prefix+to}}function escape_html(str){return str.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}function calc_jqtree_data_from_html_w_nav_menu_json(args){const rel_path=args.rel_path,_get_rel=shlomif_get_relative_path_callback(rel_path);let _recurse;return(_recurse=function(sub_tree){if($.isArray(sub_tree))return sub_tree.map(_recurse);let title_attr="";"title"in sub_tree&&(title_attr=' title="'+sub_tree.title+'"');var label=sub_tree.url===rel_path?"<b>"+sub_tree.text+"</b>":'<a href="'+escape_html(_get_rel(sub_tree.url))+'"'+title_attr+">"+sub_tree.text+"</a>";const ret={id:parseInt(sub_tree.id),label:label};return"subs"in sub_tree&&(ret.children=_recurse(sub_tree.subs)),ret})(args.input)}